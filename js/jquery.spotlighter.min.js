!function(t){t.fn.spotlighter=function(s){var e=t.extend({json:!1,json_file:"",default_spotlight_width:150,showNumbers:!0},s);t(document).ready(function(){function s(){a=t("[data-splseq="+c+"]"),p=a.attr("data-splsize"),r=parseInt(a.attr("data-spladjustx")),h=parseInt(a.attr("data-spladjusty")),void 0==p&&(p=e.default_spotlight_width),1==e.showNumbers&&l.find(".spotlighter-seq").text(c),n.html(a.attr("data-spltext")),c==t("[data-spltext]").length&&(l.find(".spotlighter-next").fadeOut(),l.find(".spotlighter-actions .spotlighter-close").fadeIn()),c>1&&l.find(".spotlighter-prev").fadeIn(),i(a,p,r,h),c++}function i(s,e,i,o){var n=s.offset(),a=s.width(),p=s.height(),r=n.top+p/2+o,h=n.left-t(document).scrollLeft()+a/2+0+i,d=parseInt(e),c=d/2*-1,f=l.find(".spotlighter-text"),u=f.height();t("html, body").animate({scrollTop:r-d},1200),l.find(".spotlight").css({left:-1*(g-h),top:-1*(g-r),marginLeft:c,marginTop:c,width:d,height:d});var v=parseInt(t(document).width()),m=t(document).height(),x=f.width(),y=f.height();v>=h+d+x?h+=d/2:h-=d/2+x,0>r-u/2?r=0:r-=u/2,r+y>m&&(r=m-y),f.css({left:h,top:r})}function o(){t.getJSON("data/spotlighter-data.json",function(s){d=s.length;for(var e=0;e<s.length;e++)t(document).find(s[e].tipLink).attr({"data-spltext":s[e].tipText,"data-splsize":s[e].tipSize,"data-splseq":s[e].tipSeq,"data-spladjustx":s[e].adjustX,"data-spladjusty":s[e].adjustY})})}var l,n,a,p,r,h,d,c=1,g=1e4;1==e.json&&""!=e.json_file&&o(),t(".startspotlighter").click(function(){return 0==t("#spotlighter-tip").length&&(t("body").append('<div id="spotlighter-tip"><div class="spotlighter-text"><div class="inner"><a class="spotlighter-seq top" href=""></a><a class="spotlighter-close top" href=""><span class="glyphicon glyphicon-remove"></span></a><div class="spotlighter-tip-text"></div><div class="spotlighter-actions"><a href="" class="spotlighter-prev"><span class="glyphicon glyphicon-menu-left"></span>Previous</a><a class="spotlighter-close" href="">Close <span class="glyphicon glyphicon-remove"></span></a><a class="spotlighter-next" href="">Next <span class="glyphicon glyphicon-menu-right"></span></a></div></div></div><div class="spotlight"></div></div>'),l=t("#spotlighter-tip"),n=l.find(".spotlighter-tip-text")),l.addClass("active"),s(),!1}),t("body").on("click","#spotlighter-tip .spotlighter-next",function(){return s(),!1}),t("body").on("click","#spotlighter-tip .spotlighter-prev",function(){return l.find("spotlighter-actions .spotlighter-close").fadeOut(),l.find(".spotlighter-next").fadeIn(),c-=2,s(),!1}),t("body").on("click","#spotlighter-tip .spotlighter-close",function(){return l.find(".spotlight").attr("style",""),l.find(".spotlighter-text").attr("style",""),l.removeClass("active"),l.find(".spotlighter-actions .spotlighter-next").show(),l.find(".spotlighter-actions .spotlighter-prev").hide(),c=1,!1})})}}(jQuery);
